<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        const width = canvas.width = window.innerWidth;
        const height = canvas.height = window.innerHeight;
        class Bar {
            constructor(widthBar, xBar, yBar, velBar) {
                this.widthBar = widthBar;
                this.xBar = xBar;
                this.yBar = yBar;
                this.velBar = velBar;
            };
            //xác định phương pháp vẽ thanh Bar
            drawBar() {
                ctx.beginPath();
                ctx.fillStyle = 'rgb(155,0,0)';
                ctx.fillRect(this.xBar, this.yBar, this.widthBar, 10);
                ctx.fill();

            };
            go_right() {
                if (this.xBar + 100 < width) {
                    this.xBar += this.velBar;
                }
            };
            go_left() {
                if (this.xBar > 0) {
                    this.xBar -= this.velBar;
                }
            }
            clearRecLast() {
                ctx.clearRect(this.xBar, this.yBar, this.widthBar, 10);
            }
        }
        let bar = new Bar(100, (width / 2) - 10, height - 20, 20);
        bar.drawBar();
        function loop() {
            $(document).keydown(function (e) {
                if ((e.keyCode || e.which) == 37) // left arrow
                {
                    bar.clearRecLast();
                    bar.go_left();
                    bar.drawBar();
                }
                else if ((e.keyCode || e.which) == 39)    // right arrow
                {
                    bar.clearRecLast();
                    bar.go_right();
                    bar.drawBar();
                }
            });
            //requestAnimationFrame(loop);
        }

        loop();
    </script>
</body>

</html>